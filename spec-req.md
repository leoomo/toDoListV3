# Todo åº”ç”¨åç«¯ API

åŸºäº Java Spring Boot 3.0 çš„ RESTful å¾…åŠäº‹é¡¹ç®¡ç† APIï¼Œæ”¯æŒå®Œæ•´çš„ CRUDã€çŠ¶æ€åˆ‡æ¢ã€æ‰¹é‡åˆ é™¤ã€åˆ†é¡µã€è¿‡æ»¤ã€å¥åº·æ£€æŸ¥ã€Swagger æ–‡æ¡£ç­‰ã€‚

## æŠ€æœ¯æ ˆ
- Java 17+
- Spring Boot 3.0
- Spring Data JPA
- mariadb
- Lombok
- Swagger (springdoc-openapi)

## æ•°æ®åº“é…ç½®
- åœ°å€ï¼šlocalhost:3306
- ç”¨æˆ·åï¼šroot
- å¯†ç ï¼šZh777888
- æ•°æ®åº“åï¼štodoapp
- å»ºè¡¨ SQLï¼šè§ `db/todoapp.sql`

## APIæ¥å£è§„èŒƒ

### åŸºç¡€ä¿¡æ¯
- **åŸºç¡€URL**: `http://localhost:8000`
- **APIå‰ç¼€**: `/api/v1`
- **æ•°æ®æ ¼å¼**: JSON
- **HTTPçŠ¶æ€ç **: éµå¾ªRESTfulè§„èŒƒ

### åç«¯APIæ¥å£æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è§ˆ

- **ç‰ˆæœ¬**: v0.1.0
- **æœ€åæ›´æ–°**: 2025-08-04
- **Base URL**: `http://localhost:8000`
- **APIç‰ˆæœ¬**: `/api/v1`
- **å†…å®¹ç±»å‹**: `application/json`
- **è®¤è¯æ–¹å¼**: æš‚æ— ï¼ˆå¯æ‰©å±•JWTè®¤è¯ï¼‰

## ğŸ”— åœ¨çº¿æ–‡æ¡£

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **OpenAPI JSON**: http://localhost:8000/openapi.json

---

## ğŸ¥ ç³»ç»Ÿæ¥å£

### å¥åº·æ£€æŸ¥

æ£€æŸ¥APIæœåŠ¡çŠ¶æ€

```http
GET /health
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "status": "healthy",
  "service": "TodoListV2 API"
}
```

**çŠ¶æ€ç **:
- `200 OK` - æœåŠ¡æ­£å¸¸

### æ ¹è·¯å¾„

è·å–APIåŸºæœ¬ä¿¡æ¯

```http
GET /
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "message": "æ¬¢è¿ä½¿ç”¨ TodoListV2 API",
  "version": "0.1.0",
  "docs": "/docs",
  "redoc": "/redoc"
}
```

**çŠ¶æ€ç **:
- `200 OK` - æˆåŠŸ

---

## ğŸ“ å¾…åŠäº‹é¡¹æ¥å£

### è·å–å¾…åŠäº‹é¡¹åˆ—è¡¨

è·å–æ‰€æœ‰å¾…åŠäº‹é¡¹ï¼Œæ”¯æŒç­›é€‰å’Œåˆ†é¡µ

```http
GET /api/v1/todos/
```

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| `completed` | string | å¦ | - | ç­›é€‰æ¡ä»¶ï¼š`true`ï¼ˆå·²å®Œæˆï¼‰ã€`false`ï¼ˆæœªå®Œæˆï¼‰ã€`all`ï¼ˆå…¨éƒ¨ï¼‰ |
| `limit` | integer | å¦ | 50 | é™åˆ¶è¿”å›æ•°é‡ï¼ŒèŒƒå›´ï¼š1-100 |
| `offset` | integer | å¦ | 0 | åç§»é‡ï¼Œç”¨äºåˆ†é¡µ |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
# è·å–æ‰€æœ‰å¾…åŠäº‹é¡¹
curl -X GET "http://localhost:8000/api/v1/todos/"

# è·å–å·²å®Œæˆçš„å¾…åŠäº‹é¡¹
curl -X GET "http://localhost:8000/api/v1/todos/?completed=true"

# åˆ†é¡µè·å–å¾…åŠäº‹é¡¹
curl -X GET "http://localhost:8000/api/v1/todos/?limit=10&offset=0"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "items": [
    {
      "id": 1,
      "title": "å®Œæˆé¡¹ç›®æ–‡æ¡£",
      "description": "ç¼–å†™æŠ€æœ¯æ¶æ„æ–‡æ¡£",
      "completed": false,
      "created_at": "2025-08-04T12:00:00",
      "updated_at": "2025-08-04T12:00:00"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

**çŠ¶æ€ç **:
- `200 OK` - æˆåŠŸè·å–

### è·å–å•ä¸ªå¾…åŠäº‹é¡¹

æ ¹æ®IDè·å–ç‰¹å®šçš„å¾…åŠäº‹é¡¹

```http
GET /api/v1/todos/{todo_id}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| `todo_id` | integer | æ˜¯ | å¾…åŠäº‹é¡¹ID |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X GET "http://localhost:8000/api/v1/todos/1"
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 1,
  "title": "å®Œæˆé¡¹ç›®æ–‡æ¡£",
  "description": "ç¼–å†™æŠ€æœ¯æ¶æ„æ–‡æ¡£",
  "completed": false,
  "created_at": "2025-08-04T12:00:00",
  "updated_at": "2025-08-04T12:00:00"
}
```

**çŠ¶æ€ç **:
- `200 OK` - æˆåŠŸè·å–
- `404 Not Found` - å¾…åŠäº‹é¡¹ä¸å­˜åœ¨

### åˆ›å»ºå¾…åŠäº‹é¡¹

åˆ›å»ºæ–°çš„å¾…åŠäº‹é¡¹

```http
POST /api/v1/todos/
```

**è¯·æ±‚ä½“**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° | éªŒè¯è§„åˆ™ |
|--------|------|------|------|----------|
| `title` | string | æ˜¯ | å¾…åŠäº‹é¡¹æ ‡é¢˜ | é•¿åº¦ï¼š1-255å­—ç¬¦ |
| `description` | string | å¦ | å¾…åŠäº‹é¡¹æè¿° | é•¿åº¦ï¼š0-1000å­—ç¬¦ |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X POST "http://localhost:8000/api/v1/todos/" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "å­¦ä¹  FastAPI",
    "description": "å®Œæˆ TodoListV2 é¡¹ç›®å¼€å‘"
  }'
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 2,
  "title": "å­¦ä¹  FastAPI",
  "description": "å®Œæˆ TodoListV2 é¡¹ç›®å¼€å‘",
  "completed": false,
  "created_at": "2025-08-04T12:30:00",
  "updated_at": "2025-08-04T12:30:00"
}
```

**çŠ¶æ€ç **:
- `201 Created` - æˆåŠŸåˆ›å»º
- `422 Unprocessable Entity` - æ•°æ®éªŒè¯å¤±è´¥

### æ›´æ–°å¾…åŠäº‹é¡¹

æ›´æ–°ç°æœ‰çš„å¾…åŠäº‹é¡¹

```http
PUT /api/v1/todos/{todo_id}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| `todo_id` | integer | æ˜¯ | å¾…åŠäº‹é¡¹ID |

**è¯·æ±‚ä½“**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° | éªŒè¯è§„åˆ™ |
|--------|------|------|------|----------|
| `title` | string | å¦ | å¾…åŠäº‹é¡¹æ ‡é¢˜ | é•¿åº¦ï¼š1-255å­—ç¬¦ |
| `description` | string | å¦ | å¾…åŠäº‹é¡¹æè¿° | é•¿åº¦ï¼š0-1000å­—ç¬¦ |
| `completed` | boolean | å¦ | å®ŒæˆçŠ¶æ€ | true/false |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X PUT "http://localhost:8000/api/v1/todos/1" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æ›´æ–°åçš„æ ‡é¢˜",
    "description": "æ›´æ–°åçš„æè¿°",
    "completed": true
  }'
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": 1,
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "description": "æ›´æ–°åçš„æè¿°",
  "completed": true,
  "created_at": "2025-08-04T12:00:00",
  "updated_at": "2025-08-04T12:30:00"
}
```

**çŠ¶æ€ç **:
- `200 OK` - æˆåŠŸæ›´æ–°
- `404 Not Found` - å¾…åŠäº‹é¡¹ä¸å­˜åœ¨
- `422 Unprocessable Entity` - æ•°æ®éªŒè¯å¤±è´¥

### åˆ é™¤å•ä¸ªå¾…åŠäº‹é¡¹

åˆ é™¤æŒ‡å®šçš„å¾…åŠäº‹é¡¹

```http
DELETE /api/v1/todos/{todo_id}
```

**è·¯å¾„å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| `todo_id` | integer | æ˜¯ | å¾…åŠäº‹é¡¹ID |

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X DELETE "http://localhost:8000/api/v1/todos/1"
```

**å“åº”**: æ— å“åº”ä½“

**çŠ¶æ€ç **:
- `204 No Content` - æˆåŠŸåˆ é™¤
- `404 Not Found` - å¾…åŠäº‹é¡¹ä¸å­˜åœ¨

### æ‰¹é‡åˆ é™¤å·²å®Œæˆé¡¹ç›®

åˆ é™¤æ‰€æœ‰å·²å®Œæˆçš„å¾…åŠäº‹é¡¹

```http
DELETE /api/v1/todos/completed
```

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X DELETE "http://localhost:8000/api/v1/todos/completed"
```

**å“åº”**: æ— å“åº”ä½“

**çŠ¶æ€ç **:
- `204 No Content` - æˆåŠŸåˆ é™¤

### æ‰¹é‡åˆ é™¤æ‰€æœ‰é¡¹ç›®

åˆ é™¤æ‰€æœ‰å¾…åŠäº‹é¡¹

```http
DELETE /api/v1/todos/all
```

**è¯·æ±‚ç¤ºä¾‹**:
```bash
curl -X DELETE "http://localhost:8000/api/v1/todos/all"
```

**å“åº”**: æ— å“åº”ä½“

**çŠ¶æ€ç **:
- `204 No Content` - æˆåŠŸåˆ é™¤

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### Todo å¯¹è±¡

```json
{
  "id": 1,
  "title": "å¾…åŠäº‹é¡¹æ ‡é¢˜",
  "description": "å¾…åŠäº‹é¡¹æè¿°",
  "completed": false,
  "created_at": "2025-08-04T12:00:00",
  "updated_at": "2025-08-04T12:00:00"
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| `id` | integer | å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè‡ªåŠ¨ç”Ÿæˆ |
| `title` | string | å¾…åŠäº‹é¡¹æ ‡é¢˜ï¼Œå¿…å¡« |
| `description` | string | å¾…åŠäº‹é¡¹æè¿°ï¼Œå¯é€‰ |
| `completed` | boolean | å®ŒæˆçŠ¶æ€ï¼Œé»˜è®¤false |
| `created_at` | datetime | åˆ›å»ºæ—¶é—´ï¼Œè‡ªåŠ¨ç”Ÿæˆ |
| `updated_at` | datetime | æ›´æ–°æ—¶é—´ï¼Œè‡ªåŠ¨æ›´æ–° |

### TodoList å“åº”

```json
{
  "items": [
    {
      "id": 1,
      "title": "å¾…åŠäº‹é¡¹1",
      "description": "æè¿°1",
      "completed": false,
      "created_at": "2025-08-04T12:00:00",
      "updated_at": "2025-08-04T12:00:00"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| `items` | array | å¾…åŠäº‹é¡¹åˆ—è¡¨ |
| `total` | integer | æ€»æ•°é‡ |
| `limit` | integer | å½“å‰é™åˆ¶ |
| `offset` | integer | å½“å‰åç§»é‡ |

---

## âš ï¸ é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "detail": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

### éªŒè¯é”™è¯¯æ ¼å¼

```json
{
  "detail": [
    {
      "type": "missing",
      "loc": ["body", "title"],
      "msg": "Field required",
      "input": {}
    }
  ]
}
```

### å¸¸è§çŠ¶æ€ç 

| çŠ¶æ€ç  | æè¿° | è¯´æ˜ |
|--------|------|------|
| `200` | OK | è¯·æ±‚æˆåŠŸ |
| `201` | Created | èµ„æºåˆ›å»ºæˆåŠŸ |
| `204` | No Content | åˆ é™¤æˆåŠŸï¼Œæ— è¿”å›å†…å®¹ |
| `400` | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| `404` | Not Found | èµ„æºä¸å­˜åœ¨ |
| `422` | Unprocessable Entity | æ•°æ®éªŒè¯å¤±è´¥ |
| `500` | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## ğŸ” è®¤è¯ä¸å®‰å…¨

### å½“å‰çŠ¶æ€

- **è®¤è¯æ–¹å¼**: æš‚æ— 
- **è®¿é—®æ§åˆ¶**: å…¬å¼€è®¿é—®
- **æ•°æ®éªŒè¯**: æœåŠ¡ç«¯éªŒè¯

### æœªæ¥æ‰©å±•

- JWT Token è®¤è¯
- API Key è®¤è¯
- ç”¨æˆ·æƒé™ç®¡ç†
- è¯·æ±‚é¢‘ç‡é™åˆ¶

---

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### å®Œæ•´çš„å·¥ä½œæµç¨‹

```bash
# 1. æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl -X GET "http://localhost:8000/health"

# 2. åˆ›å»ºå¾…åŠäº‹é¡¹
curl -X POST "http://localhost:8000/api/v1/todos/" \
  -H "Content-Type: application/json" \
  -d '{"title": "æµ‹è¯•ä»»åŠ¡", "description": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡"}'

# 3. è·å–æ‰€æœ‰å¾…åŠäº‹é¡¹
curl -X GET "http://localhost:8000/api/v1/todos/"

# 4. æ›´æ–°å¾…åŠäº‹é¡¹çŠ¶æ€
curl -X PUT "http://localhost:8000/api/v1/todos/1" \
  -H "Content-Type: application/json" \
  -d '{"completed": true}'

# 5. ç­›é€‰å·²å®Œæˆçš„å¾…åŠäº‹é¡¹
curl -X GET "http://localhost:8000/api/v1/todos/?completed=true"

# 6. åˆ é™¤å¾…åŠäº‹é¡¹
curl -X DELETE "http://localhost:8000/api/v1/todos/1"
```

### é”™è¯¯å¤„ç†æµ‹è¯•

```bash
# æµ‹è¯•æ•°æ®éªŒè¯é”™è¯¯
curl -X POST "http://localhost:8000/api/v1/todos/" \
  -H "Content-Type: application/json" \
  -d '{"description": "åªæœ‰æè¿°ï¼Œæ²¡æœ‰æ ‡é¢˜"}'

# æµ‹è¯•èµ„æºä¸å­˜åœ¨
curl -X GET "http://localhost:8000/api/v1/todos/999999"

# æµ‹è¯•æ— æ•ˆçš„æŸ¥è¯¢å‚æ•°
curl -X GET "http://localhost:8000/api/v1/todos/?limit=1000"
```

---

## ğŸ“ˆ æ€§èƒ½è¯´æ˜

### å“åº”æ—¶é—´

- **å¥åº·æ£€æŸ¥**: < 10ms
- **åˆ—è¡¨æŸ¥è¯¢**: < 50ms
- **å•ä¸ªæ“ä½œ**: < 30ms
- **æ‰¹é‡æ“ä½œ**: < 100ms

### é™åˆ¶

- **åˆ†é¡µé™åˆ¶**: æœ€å¤§100æ¡/é¡µ
- **æ ‡é¢˜é•¿åº¦**: æœ€å¤§255å­—ç¬¦
- **æè¿°é•¿åº¦**: æœ€å¤§1000å­—ç¬¦
- **å¹¶å‘è¯·æ±‚**: æ— é™åˆ¶ï¼ˆå½“å‰ï¼‰

---

## ğŸ”„ ç‰ˆæœ¬æ§åˆ¶

### APIç‰ˆæœ¬ç­–ç•¥

- **å½“å‰ç‰ˆæœ¬**: v1
- **ç‰ˆæœ¬å‰ç¼€**: `/api/v1`
- **å‘åå…¼å®¹**: ä¿è¯å…¼å®¹æ€§
- **åºŸå¼ƒé€šçŸ¥**: æå‰3ä¸ªæœˆé€šçŸ¥

### ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | ä¸»è¦å˜æ›´ |
|------|----------|----------|
| v1.0.0 | 2025-08-04 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€CRUDåŠŸèƒ½ |

---

## ğŸ“ æ”¯æŒä¸åé¦ˆ

### è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [GitHub Issues]
- **æ–‡æ¡£æ›´æ–°**: å®šæœŸæ›´æ–°

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•å¤„ç†å¤§é‡æ•°æ®çš„åˆ†é¡µï¼Ÿ**
A: ä½¿ç”¨ `limit` å’Œ `offset` å‚æ•°è¿›è¡Œåˆ†é¡µï¼Œå»ºè®®æ¯é¡µä¸è¶…è¿‡50æ¡ã€‚

**Q: æ˜¯å¦æ”¯æŒæ‰¹é‡æ“ä½œï¼Ÿ**
A: ç›®å‰æ”¯æŒæ‰¹é‡åˆ é™¤å·²å®Œæˆé¡¹ç›®å’Œæ‰€æœ‰é¡¹ç›®ï¼Œæœªæ¥ä¼šæ”¯æŒæ‰¹é‡åˆ›å»ºå’Œæ›´æ–°ã€‚

**Q: æ•°æ®æ˜¯å¦æŒä¹…åŒ–ï¼Ÿ**
A: æ˜¯çš„ï¼Œæ•°æ®å­˜å‚¨åœ¨SQLiteæ•°æ®åº“ä¸­ï¼Œé‡å¯æœåŠ¡åæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚

---

*æœ€åæ›´æ–°: 2025-08-04* 